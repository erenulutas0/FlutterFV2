# Server Configuration
server.port=8082

# Database Configuration (PostgreSQL - EnglishApp)
spring.datasource.url=jdbc:postgresql://localhost:5432/EnglishApp
spring.datasource.username=${POSTGRES_USER:postgres}
spring.datasource.password=${POSTGRES_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=12
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-init-sql=SET statement_timeout TO 5000

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.open-in-view=false
spring.jpa.properties.jakarta.persistence.query.timeout=5000
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true


# Logging
logging.level.com.ingilizce.calismaapp=DEBUG
logging.level.org.springframework.web=DEBUG

# Feature Flags
app.features.community.enabled=false
app.socketio.enabled=false

# CORS
app.cors.allowed-origins=http://localhost:8080,http://127.0.0.1:8080
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# Groq AI Configuration
groq.api.key=${GROQ_API_KEY:}
groq.api.url=https://api.groq.com/openai/v1/chat/completions
groq.api.model=llama-3.3-70b-versatile
# Iyzico Configuration (non-prod defaults are env-driven; prod overrides enforce required values)
iyzico.api.key=${IYZICO_API_KEY:}
iyzico.api.secret=${IYZICO_API_SECRET:}
iyzico.api.base.url=${IYZICO_API_BASE_URL:https://sandbox-api.iyzipay.com}
# Groq Resilience
groq.resilience.max-attempts=3
groq.resilience.initial-backoff-ms=250
groq.resilience.max-backoff-ms=2000
groq.resilience.call-timeout-budget-ms=35000
groq.resilience.failure-threshold=5
groq.resilience.open-duration-ms=30000
app.security.allow-insecure-ssl=${APP_SECURITY_ALLOW_INSECURE_SSL:false}
app.security.jwt.enforce-auth=${APP_SECURITY_JWT_ENFORCE_AUTH:false}
app.security.jwt.issuer=${APP_SECURITY_JWT_ISSUER:calismaapp}
app.security.jwt.secret=${APP_SECURITY_JWT_SECRET:dev-only-change-this-secret-dev-only-change-this-secret}
app.security.jwt.access-token-ttl-seconds=${APP_SECURITY_JWT_ACCESS_TOKEN_TTL_SECONDS:900}
app.security.jwt.refresh-token-ttl-seconds=${APP_SECURITY_JWT_REFRESH_TOKEN_TTL_SECONDS:604800}
app.security.jwt.refresh-token-remember-me-ttl-seconds=${APP_SECURITY_JWT_REFRESH_TOKEN_REMEMBER_ME_TTL_SECONDS:2592000}
app.security.jwt.allowed-clock-skew-seconds=${APP_SECURITY_JWT_ALLOWED_CLOCK_SKEW_SECONDS:30}
app.security.auth-rate-limit.enabled=${APP_SECURITY_AUTH_RATE_LIMIT_ENABLED:true}
app.security.auth-rate-limit.redis-enabled=${APP_SECURITY_AUTH_RATE_LIMIT_REDIS_ENABLED:true}
app.security.auth-rate-limit.redis-fallback-mode=${APP_SECURITY_AUTH_RATE_LIMIT_REDIS_FALLBACK_MODE:memory}
app.security.auth-rate-limit.redis-failure-block-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_REDIS_FAILURE_BLOCK_SECONDS:60}
app.security.auth-rate-limit.login-principal-max-attempts=${APP_SECURITY_AUTH_RATE_LIMIT_LOGIN_PRINCIPAL_MAX_ATTEMPTS:8}
app.security.auth-rate-limit.login-principal-window-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_LOGIN_PRINCIPAL_WINDOW_SECONDS:300}
app.security.auth-rate-limit.login-principal-block-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_LOGIN_PRINCIPAL_BLOCK_SECONDS:900}
app.security.auth-rate-limit.login-ip-max-attempts=${APP_SECURITY_AUTH_RATE_LIMIT_LOGIN_IP_MAX_ATTEMPTS:40}
app.security.auth-rate-limit.login-ip-window-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_LOGIN_IP_WINDOW_SECONDS:300}
app.security.auth-rate-limit.login-ip-block-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_LOGIN_IP_BLOCK_SECONDS:900}
app.security.auth-rate-limit.register-ip-max-attempts=${APP_SECURITY_AUTH_RATE_LIMIT_REGISTER_IP_MAX_ATTEMPTS:10}
app.security.auth-rate-limit.register-ip-window-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_REGISTER_IP_WINDOW_SECONDS:600}
app.security.auth-rate-limit.register-ip-block-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_REGISTER_IP_BLOCK_SECONDS:1800}
app.security.auth-rate-limit.password-reset-ip-max-attempts=${APP_SECURITY_AUTH_RATE_LIMIT_PASSWORD_RESET_IP_MAX_ATTEMPTS:6}
app.security.auth-rate-limit.password-reset-ip-window-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_PASSWORD_RESET_IP_WINDOW_SECONDS:600}
app.security.auth-rate-limit.password-reset-ip-block-seconds=${APP_SECURITY_AUTH_RATE_LIMIT_PASSWORD_RESET_IP_BLOCK_SECONDS:1800}
app.security.auth.password-reset-token-ttl-seconds=${APP_SECURITY_AUTH_PASSWORD_RESET_TOKEN_TTL_SECONDS:900}
app.security.auth.email-verification-token-ttl-seconds=${APP_SECURITY_AUTH_EMAIL_VERIFICATION_TOKEN_TTL_SECONDS:86400}
app.security.auth.expose-debug-tokens=${APP_SECURITY_AUTH_EXPOSE_DEBUG_TOKENS:false}

# LangChain4j / Ollama (Disabled in favor of Groq)
# langchain4j.ollama.chat-model.base-url=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_BASE_URL:https://6xjzd0cnxyklkd-11434.proxy.runpod.net}
# langchain4j.ollama.chat-model.model-name=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_MODEL_NAME:qwen2.5:32b}
# langchain4j.ollama.chat-model.temperature=0.2
# langchain4j.ollama.chat-model.timeout=180s
# langchain4j.ollama.chat-model.top-p=0.9

# Piper TTS Configuration
# Leave empty to auto-detect, or specify full path like: C:\path\to\piper.exe
piper.tts.path=C:/piper/piper.exe
piper.tts.default-model=${PIPER_TTS_DEFAULT_MODEL:en_US-amy-medium.onnx}

# Redis Cache Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.repositories.enabled=false
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Cache Configuration
# Cache TTL: 7 days (same word won't be asked again for 7 days)
cache.sentences.ttl=604800
# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=false
spring.flyway.validate-on-migrate=true

# OpenAPI / Swagger
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui

# Actuator / Health Probes
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=never
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true
management.prometheus.metrics.export.enabled=true

