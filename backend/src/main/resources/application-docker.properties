# Docker Environment Variables Override
# Spring Boot will use environment variables if set, otherwise use these defaults

# Server Configuration
server.port=${SERVER_PORT:8082}

# Database Configuration (PostgreSQL - EnglishApp)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/EnglishApp}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.postgresql.Driver}
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE:12}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE:2}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.validation-timeout=${SPRING_DATASOURCE_HIKARI_VALIDATION_TIMEOUT:5000}
spring.datasource.hikari.idle-timeout=${SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${SPRING_DATASOURCE_HIKARI_MAX_LIFETIME:1800000}
spring.datasource.hikari.connection-init-sql=${SPRING_DATASOURCE_HIKARI_CONNECTION_INIT_SQL:SET statement_timeout TO 5000}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.open-in-view=${SPRING_JPA_OPEN_IN_VIEW:false}
spring.jpa.properties.jakarta.persistence.query.timeout=${SPRING_JPA_QUERY_TIMEOUT_MS:5000}
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.properties.hibernate.format_sql=${SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL:false}
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=${SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_LOB_NON_CONTEXTUAL_CREATION:true}

# Logging
logging.level.com.ingilizce.calismaapp=${LOG_LEVEL:INFO}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:INFO}

# Feature Flags
app.features.community.enabled=${APP_FEATURES_COMMUNITY_ENABLED:false}
app.socketio.enabled=${APP_SOCKETIO_ENABLED:false}

# CORS
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:8080,http://127.0.0.1:8080}
app.cors.allowed-methods=${APP_CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
app.cors.allowed-headers=${APP_CORS_ALLOWED_HEADERS:*}
app.cors.allow-credentials=${APP_CORS_ALLOW_CREDENTIALS:true}

# Ollama Chatbot Configuration
langchain4j.ollama.chat-model.base-url=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_BASE_URL:https://6xjzd0cnxyklkd-11434.proxy.runpod.net}
langchain4j.ollama.chat-model.model-name=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_MODEL_NAME:qwen2.5:32b}
langchain4j.ollama.chat-model.temperature=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_TEMPERATURE:0.2}
langchain4j.ollama.chat-model.timeout=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_TIMEOUT:600s}
langchain4j.ollama.chat-model.top-p=${LANGCHAIN4J_OLLAMA_CHAT_MODEL_TOP_P:0.9}

# Piper TTS Configuration (external service)
piper.tts.path=${PIPER_TTS_PATH:}
piper.tts.default-model=${PIPER_TTS_DEFAULT_MODEL:en_US-amy-medium.onnx}

# Security
app.security.allow-insecure-ssl=${APP_SECURITY_ALLOW_INSECURE_SSL:false}
# Iyzico Configuration (prod profile enforces required values)
iyzico.api.key=${IYZICO_API_KEY:}
iyzico.api.secret=${IYZICO_API_SECRET:}
iyzico.api.base.url=${IYZICO_API_BASE_URL:https://sandbox-api.iyzipay.com}
# Groq Resilience
groq.resilience.max-attempts=${GROQ_RESILIENCE_MAX_ATTEMPTS:3}
groq.resilience.initial-backoff-ms=${GROQ_RESILIENCE_INITIAL_BACKOFF_MS:250}
groq.resilience.max-backoff-ms=${GROQ_RESILIENCE_MAX_BACKOFF_MS:2000}
groq.resilience.call-timeout-budget-ms=${GROQ_RESILIENCE_CALL_TIMEOUT_BUDGET_MS:35000}
groq.resilience.failure-threshold=${GROQ_RESILIENCE_FAILURE_THRESHOLD:5}
groq.resilience.open-duration-ms=${GROQ_RESILIENCE_OPEN_DURATION_MS:30000}

# Redis Cache Configuration
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}
spring.data.redis.repositories.enabled=${SPRING_DATA_REDIS_REPOSITORIES_ENABLED:false}
spring.data.redis.timeout=${SPRING_DATA_REDIS_TIMEOUT:2000ms}
spring.data.redis.lettuce.pool.max-active=${SPRING_DATA_REDIS_POOL_MAX_ACTIVE:8}
spring.data.redis.lettuce.pool.max-idle=${SPRING_DATA_REDIS_POOL_MAX_IDLE:8}
spring.data.redis.lettuce.pool.min-idle=${SPRING_DATA_REDIS_POOL_MIN_IDLE:0}

# Cache Configuration
cache.sentences.ttl=${CACHE_SENTENCES_TTL:604800}



# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=false
spring.flyway.validate-on-migrate=true

# OpenAPI / Swagger
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui

# Actuator / Health Probes
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE:health,info,metrics,prometheus}
management.endpoint.health.show-details=${MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS:never}
management.endpoint.health.probes.enabled=${MANAGEMENT_ENDPOINT_HEALTH_PROBES_ENABLED:true}
management.health.livenessstate.enabled=${MANAGEMENT_HEALTH_LIVENESSSTATE_ENABLED:true}
management.health.readinessstate.enabled=${MANAGEMENT_HEALTH_READINESSSTATE_ENABLED:true}
management.prometheus.metrics.export.enabled=${MANAGEMENT_PROMETHEUS_METRICS_EXPORT_ENABLED:true}

